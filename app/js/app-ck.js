define(["collections/notes","models/notebook","views/app","views/notebook","views/pageButtons","stores/simplenote"],function(e,t,n,r,i,s){Backbone.sync=function(e,t,n){var r,i=t.store||t.collection.store;switch(e){case"read":r=t.id?i.get(t):i.getAll();break;case"create":r=i.create(t);break;case"update":r=i.update(t);break;case"delete":r=i.destroy(t)}r?n.success(r):n.error("Note not found")};var o=function(){_.extend(this,Backbone.Events);this.views.app=new n({app:this});this.collections.notes=new e;this.collections.notes.on("add",this.render,this);this.collections.notes.setStore(new s);this.collections.notes.store.getAll();this.notes=this.collections.notes;this.models.notebook=new t(this.notes);this.views.notebook=new r({model:this.models.notebook,app:this});this.views.notebook.render();this.views.pageButtons=new i({app:this});this.views.notebook.on("notebookMouseClick",this.views.pageButtons.toggleButtons,this.views.pageButtons);this.views.notebook.on("notebookMouseSwipe",this.views.pageButtons.hideButtons,this.views.pageButtons);this.views.notebook.on("notebookMouseScroll",this.views.pageButtons.hideButtons,this.views.pageButtons);this.views.notebook.on("notebookTurnStart",this.views.pageButtons.hideButtons,this.views.pageButtons);this.views.notebook.on("notebookTurnEnd",function(){var e=this.views.notebook;this.trigger("noteSelected",e.currentPage,e.getPrevPage(),e.getNextPage())},this);this.views.app.on("randomiseStyle",$.proxy(function(){this.views.notebook.getCurrentNoteView().model.setRandomStyle();this.views.pageButtons.affixButtons(this.views.notebook.getCurrentPageView())},this));var o=this};o.prototype={views:{},collections:{},models:{},randomiseCurrentNote:function(){}};return o});